\documentclass{report}

\input{ams_header}

\usepackage{systeme}

\usepackage[T1]{fontenc}
\usepackage{dsfont}

\usepackage{tikz}
\usetikzlibrary{arrows,decorations.markings}
\usetikzlibrary{cd}


\usepackage{etoolbox}
\listadd{\pc}{$C$}
\listadd{\pc}{$C\sharp$}
\listadd{\pc}{$D$}
\listadd{\pc}{$E\flat$}
\listadd{\pc}{$E$}
\listadd{\pc}{$F$}
\listadd{\pc}{$F\sharp$}
\listadd{\pc}{$G$}
\listadd{\pc}{$G\sharp$}
\listadd{\pc}{$A$}
\listadd{\pc}{$B\flat$}
\listadd{\pc}{$B$}
\usepackage{calc}

\usepackage[top=2.5cm, left=3cm, right=3cm, bottom=2.5cm]{geometry}
\usepackage{caption}
\usepackage{hyperref}
\captionsetup{margin=10pt,font=small,labelfont=bf}

\input{fig_environments}

\newcommand{\prodmon}{\Pi}

\begin{document}

%\begingroup    

\title{Categories and music}
\author{Alice Rixte}
\date{\today}
\maketitle %\endgroup


\chapter{Introduction}


\section{Presentation of Allen Forte's work}
\begin{defn}
    A \textbf{pitch class} consists of all the pitches separated with a whole number of octaves.
\end{defn}
The set of all pitch classes comes naturally with a group structure, which is actually the group $\mathbb{Z}_{12}$. Indeed, we can associate $C$ to the pitch class $0$, $C\sharp$ to the pitch class $1$ and so on. We then have the possibillity to represent a $C$ major chord  from a geometrical point of vue (see \hyperref[Cmajor]{Figure \ref*{Cmajor}}).

\newcounter{itemcount}
\setcounter{itemcount}{450}
\renewcommand*{\do}[1]{
    \filldraw [black]  (\number\value{itemcount}:3cm) circle (1.5pt)
    node[anchor={\number\value{itemcount}-180}]
        {#1\addtocounter{itemcount}{-30}};
}
\begin{tzfigure}{
        \caption{The C Major chord in the chromatic circle}
        \label{Cmajor}
    }
    \dolistloop{\pc}
    \draw[fill=blue!20] (90:3cm) -- (330:3cm) -- (240:3cm) -- cycle;
    \draw [domain=0:360,samples=60] plot ({3*cos(\x)}, {3*sin(\x)});
\end{tzfigure}

The idea of Forte relies on the fact that a major chord will always have the same representation up to 12 rotations in this geometrical paradigm. In mathematics they are the 12 rotational symmetries of the regular dodecahedron.In music theory, these rotations are called \textbf{transpositions} and are named $T_i$ for $i\in[\![0,11]\!]$.

His intuition was that instead of considering triads (three notes chord) as the set of the notes that compose them, we should consider them as the set of the intervals between each note. As a result, every inversion of chord \footnote{the term inversion has to be taken here from a musical point of view, for instance the inversions of a C major chord are C-E-G, G-C-E, E-G-C. Later in this report, we will use inversion with another definition and we will stick to it.} will be in the same \textbf{pitch-class set}\cite{forte_1980}. This can be seen in the geometrical point of view where the simple fact  of representing the chord as a triangle allow to forget any order between the three note. Similarly, all the transpositions of the chord will be in the same pitch-class.

\paragraph{Contribution (sort of)}
From another point of view, the work of Forte can be seen as networks, as in \hyperref[transpose_net]{Figure \ref*{transpose_net}}. Nonetheless, this representation does not allow for the moment to embed the notion of pitch-class set of Forte. For this we have to introduce the Klumpenhouwer networks.
\begin{tzcategory}{
        \caption{Transpositional network}
        \label{transpose_net}
    }
    \node[scale=1.3] (a) at (0,0){
        \begin{tikzcd}
            G                                                            \\
            E \arrow[u, "T_3", bend left]                                \\
            C \arrow[u, "T_4", bend left] \arrow[uu, "T_7"', bend right]
        \end{tikzcd}};
\end{tzcategory}



\section{Presentation of Klumpenhouwer networks}
In  the 1980s, David Lewin developped a branch of music theory called transformational theory\cite{rahn_lewin_1987}. It consists of, rather than looking the musical objects for themselves but instead to mathematically study the relation between them.
%TODO read rahn_lewin_1987

Klumpenhouwer networks, or K-nets, were then introduced by Henry Klumpenhouwer, former PhD student of Lewin, to formalize the relation between two chords\cite{lewin_1990}.

We have seen that the rotations of the dodecahedron match with the notion of transposition. However, there another type of symmetry in the dodecahedron : the $12$ reflexion symmetries (see\hyperref[inversions]{Figure \ref*{inversions}}), called \textbf{inversions} in transformational music theory. Along with transposition, they form the $T/I$ group, otherwise known in mathematics as the \textbf{dihedral group} of a dodecahedron.

\setcounter{itemcount}{450}

\begin{tzfigure}{
        \caption{The $I_0$ inversion}
        \label{inversions}
    }
    \tikzset{myptr/.style={decoration={markings,mark=at position 1 with
                            {\arrow[scale=3,>=stealth]{>}}},postaction={decorate}}}
    \dolistloop{\pc}
    \draw [domain=0:360,samples=60] plot ({3*cos(\x)}, {3*sin(\x)});
    \draw [dashed,purple] (90:3cm) -- (270:3cm);
    \foreach \i in {1,...,5}{
            \draw [<->, >=stealth, thick, purple] (90 + \i*30:3cm) -- (90-\i*30:3cm) ;
        }
\end{tzfigure}


The idea behind K-nets is that instead of analyse chords transformations threw transposition only, which is not very rich, we could instead use also inversions.

\begin{defn}
    A Klumpenhouwer network is a network where objects are pitch classes and arrows between objects are labeled by an element of the group $T/I$.
\end{defn}

\begin{defn}
    Two K-nets $K$ and $K'$ are said \textbf{isographic} if and only if :
    \begin{itemize}
        \item there exist a bijection $f:V(K)\rightarrow V(K')$ from the set of vertices $V(K)$ to $V(K')$
        \item if there is an arrow $a:s\rightarrow t$ where $s,t\in V(K)$ in $K$, then there is an arrow $a':f(s)\rightarrow f(t)$ in $K'$
        \item there is an automorphism $F \in Aut(T/I)$ such that if $X$ is the label of an arrow $a:s\rightarrow t$, then $F(X)$ is the label of the arrow $a':f(s)\rightarrow f(t)$.
    \end{itemize}
\end{defn}




\section{Presentation of PK-nets}

PK-nets\cite{PAAE2016} are a generalization of K-nets. They are defined in the paradigm of category theory. Let's first present informally category theory.

The concept of category theory is simply summarized by the french proverb "Tell me who your friends are and I'll tell you who you are." The idea is that, in mathematics, it can be more important to consider the relations between objects than look at the objects themselves.

Another concept fundamental of category theory is composition.
%TODO


\begin{defn}\textbf{Set} is the category where objects are the sets and morphisms are functions between sets.
    \begin{figure}
        \centering
        \begin{tikzpicture}[baseline= (a).base]
            \node[scale=1.3] (a) at (0,0){
                \begin{tikzcd}[column sep=tiny]
                    \Delta
                    \ar[ddr, "R"',""{name=R,right}]
                    \ar[rr,"F"]
                    & &
                    \mathcal{C}
                    \ar[ddl,"S",""{name=S,left}] \\
                    & \ar[dashed,bend left=80,from=R, to=S, "\phi"']& \\
                    & \bf Set &
                \end{tikzcd}
            };
        \end{tikzpicture}
        \caption{PK-net definition}
    \end{figure}
\end{defn}

\begin{tzcategory}{\caption{PK-net definition}}
    % \node[scale=1.3] (a) at (0,0){
    \begin{tikzcd}[column sep=tiny]
        \Delta
        \ar[ddr, "R"',""{name=R,right}]
        \ar[rr,"F"]
        & &
        \mathcal{C}
        \ar[ddl,"S",""{name=S,left}] \\
        & \ar[dashed,bend left=80,from=R, to=S, "\phi"']& \\
        & \bf Set &
    \end{tikzcd}
    % };
\end{tzcategory}





The definition of a PK-net is very general and covers a lot of the concepts introduced, such as (TODO) transposition class, Lewin's GIS (TODO), Forte's (TODO) normal order class, , (TODO) K-nets, symmetric groups of permutations (TODO), Tonnetz...

\paragraph{Contribution (sort of)}

Let's study a particular class of PK-nets such that $\Delta$, $\mathcal{C}$, $R$ and $S$ are fixed. The only thing we are allowed to change is $F$.

\begin{prop}
    Let $F' : \Delta \rightarrow \mathcal{C}$ such that there exist a natural transformation $\psi : F \rightarrow F'$, then we get an obvious natural transformation $\phi' : R \rightarrow SF$
\end{prop}
\begin{proof}
    Let $\phi'_A : R(A) \rightarrow SF'(A)$ such that, $\phi'_A = S\psi_A$. In other words, in the category of functors, $\phi' = Id_S\psi$ which is necessarily a natural transformation, due to the axioms of the category of functors.
    \begin{tzcategory}{}
        \node[scale=1.3] (a) at (0,0){
            \begin{tikzcd}[column sep = small, row sep = 5.5ex]
                \Delta
                \arrow[bend left=40]{rr}[name=F,label=above:$F$]{}
                \arrow[bend right=40]{rr}[name=F2,label=below:$F'$]{}
                \ar[ddr, "R"',""{name=R,right}]
                & &
                \mathcal{C}
                \arrow[shorten <=5pt,shorten >=0pt,Rightarrow,to path={(F) -- node[label=right:$\psi$] {} (F2)}]{}
                \ar[ddl,"S",""{name=S,left}] \\
                & & \\
                & \textbf{Set}&
            \end{tikzcd}
        };
    \end{tzcategory}
\end{proof}

\subsection{Study of $\psi$}

Let $F:\Delta\rightarrow G$ and $F':\Delta\rightarrow G$ be two parallel functors where $G\in \textbf{Grp}$. Let $X,Y\in\Delta$ and $f\in Hom(X,Y)$. We then get the following commutating diagram :

\begin{tzcategory}{}
    \node[scale=1.3] (a) at (0,0){
        \begin{tikzcd}[column sep = small]
            F(X) \arrow[dd, "F(f)"'] \arrow[rr, "\psi_X"] &  & F'(X) \arrow[dd, "F'(f)"] \\
            &  &                           \\
            F(Y) \arrow[rr, "\psi_Y"']                    &  & F'(Y)
        \end{tikzcd}
    };
\end{tzcategory}


This diagrams corresponds to the equation :
\begin{eqnarray*}
    &a\cdot y &= x \cdot b\\
    \Leftrightarrow & y &= a^{-1}\cdot x\cdot  b\\
\end{eqnarray*}

Hence, there is no constraint on the couple $(x,y)$, we juste need to choose $a = x$ and $b = y$, and we get our natural transformation.

Though, $X$ and $Y$ are actually the same object and $f$ is a reflexive object, we get $a = b$, and consequently,
$$y = b^{-1}\cdot x \cdot b $$

In other words, $\psi$ is an \textbf{inner automorphism} of $G$.


\chapter{EK-nets}


% \subsection{$\mathhcal{C}$ is a one-object category}
% A natural transformation of $\Delta$ to $M$ associates each object of $\Delta$ to an arrow of $M$, i.e.an element of the underlying monoid.
\section{Definition}
\begin{defn}
    \label{funcCat}
    Let $[\_,\mathcal{E}]$ be a category such that :
    \begin{itemize}
        \item the objects are functors from any category $\mathcal{C}$ to $\mathcal{E}$.
        \item an arrow between a functor $S : [\mathcal{C},\mathcal{E}]$ and another functor $S' : [\mathcal{D},\mathcal{E}]$ is a pair $\big<N,\nu\big>$ of a functor $N : \mathcal{C}\rightarrow \mathcal{D}$ and a natural transformation $\nu : S \rightarrow S'N$.
        \item the identity of the object $S : [\mathcal{C},\mathcal{D}]$ is $Id_S = \big<Id_\mathcal{C}, \mathds{1}_S\big>$
        \item for $\big<N,\nu\big> : S' \rightarrow S''$ and $\big<P,\pi\big> : S \rightarrow S'$, the composition is defined as follow :
              $\big<N,\nu\big>\circ\big<P,\pi\big> = \big<NP,(\nu P)\pi\big>$
    \end{itemize}
\end{defn}

\begin{defn}
    Let $\mathcal{C}$ be a category. The \textbf{anchor category} $\text{Anch}(\mathcal{C})_a$ over the category $\mathcal{C}$  and an anchor $a \in \mathcal{C}$ is defined as follows :
    \begin{itemize}
        \item the objects of  $\text{Anch}(\mathcal{C})_a$ are the arrows $[a,c]$ for any $c\in \mathcal{C}$
        \item an arrow two objects $f : a \rightarrow c$ and $g : a \rightarrow d$ is an arrow $h : c\rightarrow d$ such that $h \circ f = g$.
    \end{itemize}
\end{defn}
\begin{rem}
    $\textbf{CompHoPKN}_R  = \text{Anch}([\_,\bf Set])_R$
\end{rem}

\begin{defn}
    Let $\mathcal{C}$ be a category. Then, $\bf EKN_\mathcal{C}$ is defined as the full subcategory of $[\_,\mathcal{C}]$ (see Definition \ref{funcCat}) where forall $F\in [\_,\mathcal{C}]$, $F$ is faithful.
\end{defn}

\begin{rem}
    Note that the functor component $N$ of an arrow between two EK-nets does not have to be faithful.
\end{rem}

For a category $\mathcal{D}$, there may not exist any $\mathcal{C}$ EK-Net from $\mathcal{D}$ to $\mathcal{C}$.
\begin{defn}
    A category $\Delta$ is an $EKN_{\mathcal{C}}$ \textbf{candidate} if there exists at least one $\mathcal{C}$ EK-Net on $\Delta$.
\end{defn}

\begin{note}
    From now on, we will presuppose that all the categories named $\Delta$ are candidates for the EK-net category considered.
\end{note}



TODO : pas clair du tout

Intuitively, $\mathcal{C}$ will be the analysis tool we will keep throughout the whole analysis. For a particular EK-Net $F : \Delta \rightarrow \mathcal{C}$, $\Delta$ is a pattern matched by the musical object analysed and $F$ is the object analysed in itself, or, in other words, how the pattern is being analysed from the $\mathcal{C}$ point of view.




In EK-nets, we are particularly interested in the case where $\mathcal{C} = T/I$. Since $T/I$ has only one element, all the functors $F:\Delta \rightarrow T/I$ send all the elements on the unique element of $T/I$. In the following, we will not recall the image of the elements of $\Delta$.

\subsection{EK-nets on monoids}

EK-nets have particular properties when the category $\mathcal{C}$ has a single element. Let $\mathcal{M}$ be such a category and let us consider  an $\mathcal{M}$ EK-nets .

If $\Delta$ has a single element, then the functors $[\Delta,\mathcal{M}]$ are in one-to-one correspondance with the monoid morphisms. Since EK-nets are faithful, we only get the injective morphisms. In other words, the set of $\text{EKN}_{\mathcal{M}}$ candidates is in one-to-one correspondence with the submonoids of $M$. 
    
\begin{prop}
    The natural transformation components $\nu : F \rightarrow F'N$ of EK-homographies do not actually depend on $F$ when we consider $\mathcal{M}$ EK-nets. 
\end{prop}

Indeed, since $\mathcal{M}$ has only one element $\bullet$, any mapping from $\Delta$'s elements to a reflexive arrows of $\bullet$ defines a set of endomorphisms from any $T/I$ EK-net on $\Delta$.
%TODO define group action
% Here, $S:\mathcal{C}\rightarrow \textbf{Set}$ is the action of $T/I$ on the set $Notes = \{C,C\sharp,D,E\flat,E,F,F\sharp,G\sharp,A,B\flat,B\}$.



\section{How to encode musical objects in $\textbf{EKN}_{T/I}$}

Let us study what shape the category $\Delta$ could have. It can be void, and the only arrow from $\Delta$ to $T/I$ could be interpreted as a timeless silence.

\subsection{Recover pitch classes}
%TODO : better proof
Let us suppose that $\Delta$ has only one element $A$. Consequently, $\Delta$ is isomorphic to a subgroup of $T/I$. The set of these subgroups is in one-to-one correspondance with the set of T/I EK-Nets with $\Delta$ fixed.

\paragraph{$\Delta$ has exactly one arrow}
Let us suppose $\Delta$ has only one arrow : the identity $Id_A$. There is only one functor $F:\Delta \rightarrow T/I$ which maps $Id_A$ to $T_0$. In other words, if we need a musical to be completely unique, we must encode it as a unique object with a unique arrow. For instance, if a track is using a certain key (e.g. Amin), we could map this key to this object so it acts as an anchor.

% Hence, the PK-nets allow only one type of analysis here. Let us choose $R(A) = B$. We can the choose any function $f : B \rightarrow Notes$, to be our natural isomorphism $\phi$. Since the elements of $B$ are not relevant, we can consider this function as a \textbf{multiset} of notes.

\paragraph{$\Delta$ has two arrows}
There are $13$ 2-elements subgroups of $T/I$ : $\{T_0,T_6\}$ and $\forall k\in[\![1,12]\!], \{T_0,I_k\}$. They are all obviously isomorphic to the group $\mathbb{Z}_2$, that we can safely \footnote{ since all the 2-elements groups are isomorphic to $\mathbb{Z}_2$} choose as our $\Delta$. Consequently, we get $13$ parallel functors from $\mathbb{Z}_2$ to $T/I$.

We also know that all (inner) automorphisms of T/I are natural transformations between endofunctors of $T/I$. Precisely, all the functors corresponding to the subgroups $\{T_0,I_k\}$ are isomorphic threw a positive automorphism.
%TODO define positive isomorphisms

However, since all automorphisms of T/I send transpositions on transpositions and inversions on inversions, there is no natural transformations for $\{T_0,T_6\}$ to any other functor.
%TODO maybe name better those functors

Consequently, we have two equivalence classes of EK-nets. This gives to the analyst two different tools to analyse a point with two arrows on it.

It would be tempting to define our pitch-classes as the 12 functors with a maping like this :

%TODO define f and everything

\begin{eqnarray*}
    C & \rightarrow (f \rightarrow I_0) \\
    C\sharp &\rightarrow (f \rightarrow I_1) \\
    &\vdots \\
    B & \rightarrow (f \rightarrow I_{11})
\end{eqnarray*}

However, this would not be coherent with the interaction between two pitch-classes. Indeed, if we want to use two different pitch-classes, with an arrow between them, we are forced by the category constraints to have at least two morphisms between the pitch-classes, as we can see in Figure \ref{wrongPitchClass}.
%TODO : finish paragraph

\begin{tzcategory}{\caption{Wrong definition of pitch classes}
        \label{wrongPitchClass}}
    \node[scale=1.3] (a) at (0,0){
        \begin{tikzcd}
            {}
            \bullet \arrow["I_i"', loop, distance=2em, in=125, out=55] &      \\
            &      \\
            \bullet \arrow["I_j"', loop, distance=2em, in=305, out=235] \arrow[uu, "I_y"', bend right] \arrow[uu, "T_x", bend left] &
        \end{tikzcd}
    };
\end{tzcategory}


\begin{prop}
    By considering a pitch class as a single point with to reflexive arrows, we can use only half of the notes in practice.
\end{prop}
\begin{proof}
    $i$ and $j$ are fixed.
    \begin{eqnarray*}
        I_i \circ T_x  = I_y \Rightarrow i - x = y \Rightarrow i = x + y\\
        T_x \circ I_j = I_y \Rightarrow x + j = y \Rightarrow j = y - x\\
    \end{eqnarray*}
    So we get
    $$\systeme*{2x = i - j, 2y = i + j}$$

    This is possible iff $i$ and $j$ have the same parity. In other words, in a connex component of the category $\Delta$, we could only use 6 notes.


\end{proof}

A fix to this problem is to consider a pitch class as a 2-objects EK-net (see Figure \ref{pitchClassDef}).


\begin{tzcategory}{\caption{The k pitch-classes as PK-nets}
        \label{pitchClassDef}}
    \node[scale=1.3] (a) at (0,0){
        % https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBoA2AXVJADcBDAGwFcYkQAdDgI2ccZg4QAX1LpMufIRRkALNTpNW7Lr36CRYkBmx4CRAIyliChizaIQm8bqlEyJmmeWWRCmFADm8IqABmAE4QALZIZCA4EGE0jBAQaPakfkxwMAqM9NwwjAAKEnrSIAFYngAWQk5KFiAAKgD6wORYwtYggSFIRhFRiF2x8YYAHGTJjKnpmdl5tvqWxWUViubsAJINAEwA1i2i-kGhiOGRnTRZYFBIALQAzOHO1fWNzSAxk7n5dnMl5a3tB0c9LpnC6IW6vLLvGaFAR+Rb3VYbTaXJotGg4ehYRjsSBgNi7Nr7JDrNE9a7CSjCIA
        \begin{tikzcd}
            {}
            X \arrow["I_{2i}"', loop, distance=2em, in=125, out=55] &      \\
            &      \\
            Y %\arrow["T_{k}"', loop, distance=2em, in=305, out=235] 
            \arrow[uu, "I_{i}"', bend right] \arrow[uu, "T_{i}", bend left] &
        \end{tikzcd}
    };

\end{tzcategory}

\begin{prop}
    By fixing $\Delta$ as shown in Figure \ref{pitchClassDef}, we get an analysis set of 12 EK-Nets.
\end{prop}

\begin{proof}
    A transposition of $j$ semi-tones of a pitch class $i$ is a natural transformation $$\psi = \systeme*{X\rightarrow T_j, Y\rightarrow T_0}$$

    \begin{tzcategory}{\caption{The k pitch-classes as PK-nets}
        }
        \node[scale=1.3] (a) at (0,0){
            % https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEAKADQEoQAvqXSZc+QigBM5KrUYs27AOQ9+QkdjwEiZSbPrNWiDpwCaa4SAybxRaXuoGFx5WYsax2lGQDM++UYmfIKW1p4SyNJ+jgGKKsHqVqJaEWQArP6Gim4hHil2pBkxWS4q5oKyMFAA5vBEoABmAE4QALZIZCA4EEjSciUgAJIA+sCSWAIg1Ax0AEYwDAAKybbGTVjVABY4uSDNbR3U3UgAjMXOIAAqwwBWUyAz80srXg8wDTuJ++2IZ109iB850CIzGnCwAGobrxJtM5gtljZXgx3p9LN9ekcAUD+hdrnc4U9EeE2OstmjGi0fgAWLFIABswLY1yw90eCJeEhAZO2uwxiFp-yQaSZxmuxDZ8OeSK5KI+fKpwrpiAA7KKrqNITdYQ8pcT8sY5RS9orEIyhar1fjJUTOaSNryBBQBEA
            \begin{tikzcd}
                F(X) \arrow[dd, "I_{2i}"'] \arrow[rr, "T_j"]
                &  & F'(X) \arrow[dd, "I_{2(i+j)}"]
                &  & F(X) \arrow[dd, "T_i"'] \arrow[rr, "T_0"]
                &  & F'(X) \arrow[dd, "T_{i+j}"]   \\
                \\
                F(Y) \arrow[rr, "T_j"']
                &  & F'(Y)
                &  & F(Y) \arrow[rr, "T_j"']
                &  & F'(Y)
            \end{tikzcd}
        };
    \end{tzcategory}
\end{proof}


\subsection{Transposition generalization}

% \begin{defn}[Connected components of a category]
%     Let $\Delta$ be a category. Via forgetful functors, we can get an underlying undericted graph of $\Delta$. Let $\text{CC}_\Delta$ be the set of the connected components of this graph.
% \end{defn}

\begin{defn}
    An \textbf{EK-anchor} is an object $a\in\Delta$  with only one reflexive arrow on $a$ in $\Delta$ (a.k.a $id_a$).
\end{defn}

\begin{prop}[EK-anchor properties]~
    \begin{enumerate}
        \item Let $a$ be an EK-anchor. For any object $d \in \Delta$, there is at most one arrow $f:d\rightarrow a$.
        \item For any $a\in \Delta$, if there exists an object $d\in \Delta$ such that $\textbf{card}([d,a]) = 1$, then $a$ is an EK-anchor.
    \end{enumerate}
    \label{anchorProp}
\end{prop}

% The Proposition \ref{anchorProp} tells us that it is not of any use to have two different anchors in the same connected component.
\begin{proof}
    \begin{enumerate}
        \item The unicity is immediate from the composition law of a category.
        \item By absurd, if we suppose $a$ is not an anchor, then it has at least one reflexive arrow $r$ different from the identity. Let $f : d\rightarrow a$ the unique arrow between $d$ and $a$. Then we must have $r \circ f = f$ since $f$ is unique. So $r$ would have to be the identity.
    \end{enumerate}
\end{proof}

\begin{defn}[Generalization of transposition]
    For any T/I EK-net $F$ on $\Delta$, a transposition $\tau$ is a mapping from $Obj(\Delta)$ to $ $
\end{defn}


\section{Recovering intervals}

Let us study how to use PK-nets with a 2-objects category $\Delta$.




% TODO  : what is the juxtaposition of two connected component (ie no morphism between them)


\section{Recover Tonnetz}


\begin{defn} The \textbf{category of elements} $el(F)$ of a functor $F : \mathcal{C}\rightarrow \textbf{Set}$ is defined as follows :
    \begin{itemize}
        \item its objects are the pairs $(c,x)$ where $c$ is an object of $\mathcal{C}$ and $x\in F(c)$
        \item its morphisms $(c,x)\rightarrow (c',x')$ are morphisms $u : c\rightarrow c'$ such that $F(u)(x) = x'$
    \end{itemize}
\end{defn}
\paragraph{}
Now, what is the category of elements of the PLR-group action over \textbf{Set}? Let $S$ be the functor from the category PLR to the category \textbf{Set} such that $S$ associates to the only object of PLR a set $X$ of cardinality 24 and such that $S$ is a PLR-group action on $X$.

$el(S)$ is then a category with $24$ objects. One can use it as a $\Delta$ category in a PK-net. The transformation $\phi$ gives us the musical interpretation, of each transformation triads.

=> How to add more structure to eliminate arrow? Maybe take two generators

\chapter{Polyphony}
\section{Strict monoidal category freely generated by a group}

% McLane, Categories for the working mathematician p.161 -162
\begin{defn}[Strict monoidal category]
    A \textbf{strict monoidal category}\cite{lane_1971} $\big<\mathcal{C},1_\mathcal{C},\otimes_\mathcal{C}\big>$ is a category $\mathcal{C}$ with a bifunctor $\otimes_\mathcal{C} : \mathcal{C}\times\mathcal{C} \rightarrow \mathcal{C}$ and an object $1\in\mathcal{C}$ such that :
    \begin{itemize}
        \item $\otimes$ is associative : $(-\otimes-)\otimes - = - \otimes (-\otimes-)$
        \item $1_\mathcal{C}$ which is a left and right unit for $\otimes_\mathcal{C}$ : $1_\mathcal{C}\otimes_\mathcal{C} - = Id_{\mathcal{C}} = - \otimes_\mathcal{C} 1_\mathcal{C}$
    \end{itemize}
    \label{strict-mon}
\end{defn}

% McLane, Categories for the working mathematician p.161 -162
\begin{defn}[Strict monoidal functor]
    A \textbf{strict monoidal functor}
    $F : \big<\mathcal{C},1_\mathcal{C},\otimes_\mathcal{C}\big> \rightarrow \big<\mathcal{D},1_\mathcal{D},\otimes_\mathcal{D}\big>$
    is a $F : \mathcal{C} \rightarrow \mathcal{D}$ such that :
    \begin{itemize}
        \item $F(1_\mathcal{C}) = 1_\mathcal{D}$
        \item $F(c\otimes_\mathcal{C} c') = F(c)\otimes_\mathcal{D}F(c') $
    \end{itemize}
    \label{strict-mon_func}
\end{defn}

\begin{defn}[StrictMonCat]
    The strict monoidal categories along with the strict monoidal form a category called \bf StrictMonCat\cite{katsumata_2014}.
    \label{SrictMonCat}
\end{defn}

\begin{defn}[Free strict monoidal category]
    For $\mathcal{C} \in \bf Cat$, the \textbf{free strict monoidal category} $ \Sigma (\mathcal{C})\in \bf StrictMonCat$ over a category $\mathcal{C}$ is a strict monoidal category such that :
    \begin{itemize}
        \item objects of $\Sigma (\mathcal{C})$ are the list of objects of $\mathcal{C}$
        \item for two objects $A = A_1,\dots,A_m$ and $B = B_1,\dots,B_n$ of $\Sigma (\mathcal{C})$, if $m = n$ then every list of morphisms $f_1,\dots,f_m$ such that $f_i$ is a morphism from $A_i$ to $B_i$ in $C$ is a morphism of $\Sigma(\mathcal{C})$ from $A$ to $B$
        \item The tensor product of two $\Sigma(\mathcal{C})$ objects is there concatenation as well as the tensor product of two morphisms.
    \end{itemize}
\end{defn}

\paragraph{Strict monoidal category freely generated by a group}


Let G  be a group seen as a one-element $A$ category $\mathcal{G}$. Then $ \Sigma(\mathcal{G})$ is a category such that :
\begin{itemize}
    \item $\Sigma(\mathcal{G})$ has a countable infinity objects : the lists $A_n$ of length $n \in \mathbb{N}$ and where all the elements of $A_n$ are $A$.
    \item Since there is only one object of length $n$, there is no morphism between two different objects of $\Sigma(\mathcal{G})$. Let's consider the full subcategory containing only the $A_n$ object. Then the morphisms of this category are of the form $f_1,...,f_n$ where $f_i$ is a morphism from $\mathcal{G}$. We recognize the group $G^{n}$. $\Sigma (\mathcal{G})$ is then the disjoint union of the $\mathcal{G}^{n}$ for $ n\in\mathbb{N}$.
    \item  The tensor product is such that  $A_m \otimes A_n = A_{m+n}$, or, in other words, $\mathcal{G}^m \otimes \mathcal{G}^n = \mathcal{G}^{m+n}$.
\end{itemize}

\section{Free symmetric strict monoidal category generated by a group}
\begin{defn}
    A \textbf{symmetric strict monoïdal category} is a strict monoidal category a long with a natural isomorphism $B_{x,y}: x\otimes y \rightarrow y\otimes x$ called the \textbf{braiding} such that : \begin{itemize}
        \item the diagram in \hyperref[braid_commut]{Figure \ref*{braid_commut}} commutes
              \begin{tzcategory}{
                      \caption{Commutation diagram for symmetric strict monoidal categories}
                      \label{braid_commut}
                  }
                  \node[scale=1.3] (a) at (0,0){
                      \begin{tikzcd}
                          x\otimes y \otimes z \arrow[dd, "{B_{x,y}\otimes \mathit{Id}}"'] \arrow[rd, "{B_{x,y\otimes z}}"] &                      \\
                          & y\otimes z \otimes x \\
                          y\otimes x \otimes z \arrow[ru, "{\mathit{Id} \otimes B_{x,z} }"']                                &
                      \end{tikzcd}};
              \end{tzcategory}

        \item $B_{x,y}B_{y,x} = 1_{x\otimes y}$
    \end{itemize}
\end{defn}

\begin{defn}
    The \textbf{free symmetric strict monoidal category} $S(\mathcal{C})$ over a category $\mathcal{C}$ is a strict monoidal category such that :
    \begin{itemize}
        \item objects of $S(\mathcal{C})$ are the list of objects of $\mathcal{C}$
        \item morphisms of  $S(\mathcal{C})$ are labeled permutations $\big<l,\sigma\big> \in Hom\big((x_1,\dots,x_n),(y_1,...,y_n)\big)$ where $\sigma \in S_n$ and $l_i\in Hom(x_i,y_i)$  and where
              $$\big<l,\sigma\big> \big((x_1,\dots, x_n)\big) = (y_{\sigma_1},\dots,y_{\sigma_n})$$
              $$\big<l,\sigma\big>\circ\big<k,\tau\big>  = \big<(l_1 \circ k_{\sigma_1},\dots, l_n \circ k_{\sigma_n}),\sigma\circ\tau\big>$$

        \item the tensor product of two objects of $S(\mathcal{C})$ is their concatenation.
    \end{itemize}
\end{defn}

\begin{defn}
    Let $N$ and $H$ be two groups and $\phi : H \rightarrow Aut(N)$.
    The  \textbf{outer semidirect product} $N\rtimes_\phi H$ of $N$ and $H$ with respect to $\phi$ is the group defined on the set $N\times H$ with the following operation :
    $$(n_1,h_1)\cdot (n_2,h_2) = \big(n_1\phi(h_1)(n_2),h_1h_2\big)$$
\end{defn}

\begin{defn}
    Let $G$ and $H$, with $H$ acting on set $\Omega$. Let $K$ be the direct product
    $$K = \prod_{\omega \in \Omega}G_\omega$$
    Let $\phi : H \rightarrow Aut(K)$ such that
    $$\phi(h)(\omega\rightarrow a_\omega) = \omega \rightarrow a_{h^{-1}\omega}$$
    The \textbf{wreath product} of $G$ by $H$ is then
    $$G\wr_\Omega H = K \rtimes_{\phi}H$$
    %TODO !!!!!!!!!!!!!!!!!!!!TO_DELETE!!!!!!!!!!!!!!!!!!!!!!
    QUESTION : why this $h^{-1}$ ? I guess that would mean we are dealing with right actions, but why do we want a right action ?
\end{defn}

\paragraph{Symmetric strict monoidal category freely generated by a group}

\begin{prop}
    Let $G$ be a group and $\mathcal{C}_G$ the group $G$ seen as a category with a single element $A$. Let also $\Omega_n = [\![0,n]\!]$ and $S_n$ the symmetric group of degree $n$ acting on $\Omega_n$. Then $S(\mathcal{C}_G)$ is a category such that :
    \begin{itemize}
        \item the set of objects of $S(\mathcal{C}_G)$ is $\{A_n = (\underbrace{A,\dots,A}_\textrm{n times}) : n\in \mathbb{N}\}$
        \item the morphism of $S(\mathcal{C}_G)$ are : $Hom(A_m,A_n) = \begin{cases}
                      G\wr_{\Omega_n}S_n & \mbox{ if } n = m \\
                      \emptyset          & \mbox{ otherwise}
                  \end{cases}$
        \item $A_m\otimes A_n = A_{m+n}$
    \end{itemize}

\end{prop}

\begin{proof}
    Let us first prove that $G_n = G\wr_{\Omega_n}S_n$ and $Hom(A_n,A_n)$ have the same underlying set.
    The object $A_n = (\underbrace{A,\dots,A}_\textrm{n times})\in S(G)$ is the only object of size $n$ and the underlying set of its reflexive arrows (according to the definition we gave) is $ Hom(A,A)^{n} \times S_n$. We also know that $Hom(A,A)$ is the group $G$.
    Let us reconstruct from the definition to understand what are its elements.
    We have $$K_n = \prod_{i\in [\![1,n]\!]}G_i$$
    In other words, $K_n$ is here the group $G^n$. Consequently, the underlying set of $G_n$ is $G^n\times S_n$.
    \vspace{0.5cm}

    Now, we need to verify that the group operation of $G_n$ corresponds to the composition law in $Hom(A_n,A_n)$.
    Let $\phi_n : S_n \rightarrow Aut(G^n)$ is such that $$\phi_n(\sigma)(i\rightarrow l_i) = i \rightarrow l_{\sigma_i}$$ where $(l_i)_{i\in \Omega_n}$ are elements of $G$. The composition in $G_n$ is then
    \begin{align*}
        (l,\sigma)\cdot (k,\tau) & = \big(l\circ \phi(\sigma)(k),\sigma\circ\tau\big)                                 \\
                                 & = \big((l_1 \circ k_{\sigma_1},\dots, l_n \circ k_{\sigma_n}),\sigma\circ\tau\big)
    \end{align*}
    This is exactly the composition in $Hom(A_n,A_n)$. We can then conclude that $G_n = Hom(A_n,A_n)$.

\end{proof}



\section{Monoidal monad}

\begin{defn}[Monad]
    A \textbf{monad} on the category $\mathcal{C}$ is an endofunctor $T : \mathcal{C}\rightarrow\mathcal{C}$ together with two natural transformations $\eta : 1_\mathcal{C}\rightarrow T$ and $\mu : T^2 \rightarrow T$ such that both diagrams in \hyperref[monad-coherence]{Figure \ref*{monad-coherence}} commute.


    \begin{tzcategory}{\caption{The monad coherence conditions}
            \label{monad-coherence}}
        \node[scale=1.3] (a) at (0,0){
            % https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRABUA9AZhAF9S6TLnyEUARnJVajFmy4AmfoJAZseAkTLjp9Zq0QdOSgUPWiikndT1zD7ZWZGaU3KTdkGOj1cI1jkABZSaxl9eR81ZwDgyg9w+2NIvwtXEN1PeSS+aRgoAHN4IlAAMwAnCABbJDIQHAgkSTC7DgAdVsqmH3Kqmup6pAV4lvbOgAIHagY6ACMYBgAFFJcQMqx8gAscborqxCG6hsQ3EGm5xeWxVfWtkGGvUa7TEB69poHjqdn5pfMVhhgJW29zYjx2vUQwUOSAArFMsGAvFAIEwZgC7iANjA6FA2JBERicHQsAw8QRWM9XkgAOz9I5w5oPDpdL7nX7RNhrTbbSm7JAANjpsJBhkeY3BeyhH1pp2+Fz+Vy5txFbVaMCJEqQUqOgsZoLVRIm-AofCAA
            \begin{tikzcd}[column sep = 3em, row sep = 3em]
                T^3 \arrow[r, "T\mu"] \arrow[d, "\mu T"'] & T^2 \arrow[d, "\mu"] &  & T \arrow[rd, equal] \arrow[d, "T\eta"'] \arrow[r, "\eta T"] & T^2 \arrow[d, "\mu "] \\
                T^2 \arrow[r, "\mu"']                     & T                    &  & T^2 \arrow[r, "\mu"']                                                     & T
            \end{tikzcd}
        };
    \end{tzcategory}

\end{defn}

\begin{defn}[Adjunction]
    Two functors $F : \mathcal{D}\rightarrow \mathcal{C}$ and $G : \mathcal{C} \rightarrow \mathcal{D}$ are \textbf{adjoints} if and only if
    %TODO define \cong
    $$\forall X\in \mathcal{C}, Y \in \mathcal{D}, Hom(FY,X) \cong Hom(Y,GX)$$
\end{defn}


\begin{prop}
    Let $F: \mathcal{C} \rightarrow \mathcal{D}$ and $\Sigma : \textbf{Cat}\rightarrow \textbf{StrictMonCat}$ where $\Sigma(\mathcal{C})$ is defined as described in \hyperref[strict-mon]{Definition \ref*{strict-mon}} and,
    $\forall c = (c1,\dots,c_n)\in \Sigma(\mathcal{C}),
        f = (f_1,\dots,f_n) \in Hom(c,d)$
    \begin{align*}
        \Sigma(F)(c) & = \big(F(c_1),\dots,F(c_n)\big) \\
        \Sigma(F)(f) & = \big(F(f_1),\dots,F(f_n)\big)
    \end{align*}
    Then $\Sigma$ is a functor from $\textbf{Cat}$ to $\textbf{StrictMonCat}$
\end{prop}

\begin{proof}
    We have to verify that $\Sigma$ complies with the coherence conditions of a functor, or in other words that $\Sigma(F)$ is a monoidal functor and that
    $$\Sigma(F) \cdot \Sigma(G) = \Sigma(F\cdot G) $$
    %TODO : well verify it please

    Moreover, $\Sigma(F)$ has to be a monoidal functor :%TODO : define it
    \begin{align*}
        \Sigma(F)\big(()_{\Sigma(\mathcal{C})}\big)
         & = ()_\mathcal{\Sigma{D}}                                   \\
        \Sigma(F)(c\otimes c')
         & = \Sigma(F) \big((c_1, \dots, c_n,c'_1, \dots, c'_m) \big) \\
         & =  \big(F(c_1),\dots,F(c_n),F(c'_1),...F(c'_m)\big)        \\
         & = \Sigma(F)(c) \otimes \Sigma(F)(c')
    \end{align*}
    %TODO I have to prove that this is enough for being a monoidal functor in the case where we only have strict monoidal functors.
\end{proof}

\begin{prop}
    $\Sigma$ is a left adjunct of the forgetful functor $U : \textbf{StrictMonCat} \rightarrow \textbf{Cat}$ where
    \begin{align*}
        U\big(\big<\mathcal{C},()_{\mathcal{C}},\otimes\big>\big)
         & = \mathcal{C} \\
        U\big(\big<\mathcal{C},()_{\mathcal{C}},\otimes\big>\big)
         & = \mathcal{C} \\
    \end{align*}
\end{prop}

\begin{proof}
    Let $l_1,...,l_p\in \big<\mathcal{C},()_{\mathcal{C}},\otimes\big>$ such that $\forall i \in  [\![1,n]\!], l_i = (c^i_1,\dots,c^i_{n_p})$, where $c^i_j \in \mathcal{C}$. Let also, for each $x\in \big(\big<\mathcal{C},()_{\mathcal{C}},\otimes\big>$ define $x^o \in U\big(\big<\mathcal{C},()_{\mathcal{C}},\otimes\big>\big)$ the corresponding object in the structure without the tensorial product, and $F^o = U(F)$.

    Let us define the unit $\eta$ and the counit $\epsilon$ of the adjunction :
    \begin{align*}
        \eta(\mathcal{C})
         & : \mathcal{C} \mapsto U\Sigma(\mathcal{C})                         \\
         & : c \mapsto (c)^o                                                  \\
         & : f \mapsto (f)^o                                                  \\
        \epsilon\big(\big<\mathcal{C},()_{\mathcal{C}},\otimes\big>\big)
         & : \Sigma U\Big(\big<\mathcal{C},()_{\mathcal{C}},\otimes\big>\Big)
        \mapsto \big<\mathcal{C},()_{\mathcal{C}},\otimes\big>                \\
         & : \big(l_1^o,\dots,l_p^o\big) \mapsto
        l_1 \otimes_\mathcal{C} \dots \otimes_\mathcal{C} l_p                 \\
         & : \big(\mathit{lf}_1^o,\dots, \mathit{lf}_p^o\big) \mapsto
        \mathit{lf}_1 \otimes_\mathcal{C} \dots \otimes_\mathcal{C}
        \mathit{lf}_p                                                         \\
    \end{align*}

    We now need to prove that $\eta$ and $\epsilon$ are natural transformations. This is trivial in the case of $\eta$, let us concentrate on $\epsilon$ : we need, for a monoidal functor
    $F^\otimes :  \big<\mathcal{C},()_\mathcal{C},\otimes_\mathcal{C}\big> \rightarrow  \big<\mathcal{D},()_\mathcal{D},\otimes_\mathcal{D}\big>$
    with an underlying functor $F : \mathcal{C} \rightarrow \mathcal{D}$, that
    $$\epsilon\big(\big<\mathcal{D},()_\mathcal{D},\otimes_\mathcal{D}\big>\big) \Sigma U(F) =
        F\epsilon\big(\big<\mathcal{C},()_\mathcal{C},\otimes_\mathcal{C}\big>\big) $$
    This is true because :
    \begin{align*}
        F\epsilon\big(\big<\mathcal{C},()_\mathcal{C},\otimes\big>\big)
        (l_1^o,\dots,l_n^o)
         & = F(l_1\otimes_\mathcal{C}\dots \otimes_\mathcal{C} l_n)         \\
         & \simeq F l_1 \otimes_\mathcal{D}\dots \otimes_\mathcal{D} F l_n  \\
         & =\epsilon\big(\big<\mathcal{D},()_\mathcal{D},\otimes\big>\big)
        \big((Fl_1)^o,\dots, (Fl_n)^o\big)                                  \\
         & = \epsilon\big(\big<\mathcal{D},()_\mathcal{D},\otimes\big>\big)
        \big(F^o l_1^o,\dots, F^ol_n^o\big)                                 \\
         & =\epsilon\big(\big<\mathcal{D},()_\mathcal{D},\otimes\big>\big)
        \Sigma (F^o) \big(l_1^o,\dots, _n^o\big)                            \\
         & =\epsilon\big(\big<\mathcal{D},()_\mathcal{D},\otimes\big>\big)
        \Sigma U(F) (l_1,\dots l_n)
    \end{align*}

    To finish, we need to prove that
    \begin{align*}
        \mathit{Id}_{\Sigma\mathcal{C}}
         & = \epsilon_{\Sigma\mathcal{C}} \circ \Sigma (\eta_\mathcal{C}) \\
        \mathit{Id}_{U\mathcal{D}^\otimes}
         & = U(\epsilon D^\otimes) \circ \eta_{U\mathcal{D}^\otimes}
    \end{align*}
    which is true because
    \begin{align*}
        \epsilon_{\Sigma\mathcal{C}} \circ \Sigma (\eta_\mathcal{C})
        (c_1,\dots,c_n)
         & = \epsilon_{\Sigma\mathcal{C}} \big((c_1)^o,\dots,(c_n)^o\big) \\
         & = (c_1)\otimes\dots\otimes(c_n)                                \\
         & = (c_1, \dots, c_n)                                            \\
        U(\epsilon D^\otimes) \circ \eta_{U\mathcal{D}^\otimes} (l^o)
         & =  U(\epsilon D^\otimes) ((l^o)^o)                             \\
         & = l^o
    \end{align*}
\end{proof}

\begin{defn}
    Let $M = U\Sigma$. Then $M$ is a monad in the $\bf Cat$ category.
\end{defn}



We would like to find a monad from the functor category $\big[\_,Set\big]$ (see Definition \ref{funcCat}).


\begin{tzcategory}{\caption{We want to define $S_\prodmon$}}
    \node[scale=1.3] (a) at (0,0){
        % https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAB12BbOnACwDGjYAGEAviDGl0mXPkIoATOSq1GLNgFkAFJx78hDUWICUk6SAzY8BIgEZSi1fWatEIAMowck1TCgA5vBEoABmAE4QXEhkIDgQSA5qrlrmYZHRiLHxSMrJGu4eINQMdABGMAwACrI2CiDhWAF8PlLpUYnUOYh5LgWeAPqavmJAA
        \begin{tikzcd}[column sep = 1.8em, row sep = 2.2em]
            \mathcal{C}
            \arrow[rr, "\eta_M(\mathcal{C})"]
            \arrow[rdd, "S"',""{name=S, right}]
            & & M(\mathcal{C})
            \arrow[ldd, "S_\prodmon", ""{name=SP, left}] \\
            &  \arrow[Rightarrow, from=S, to=SP, "\mathds{1}_S"]   &             \\
            & Set &
        \end{tikzcd}
    };
\end{tzcategory}

% \begin{defn}
%     Let $$\zeta_M(\mathcal{C}) : c \mapsto S(c) = S_\prodmon((c)^o)$$
% \end{defn}

\begin{tzcategory}{\caption{$S_\prodmon(f)$ is uniquely defined}}
    \node[scale=1.3] (a) at (0,0){
        % https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAB12AFLAfWCycsYZJwCEyAIykwFcRQC+AZQAUAY15YAlCAWl0mXPkIoyAJiq1GLNqo3bd+kBmx4CRM6QvV6zVohA7AHJNHT0DV2MPcktfGwDOHn5BdmEAAlF2CWlZeWV1EIcFSxgoAHN4IlAAMwAnCABbJDIQHAgkaSs-NjRNEGoGOgAjGAYuQzcTEFqsMoALHEca+qbETrakTxBBkbGJqICZ+cWfa39AlWrQpZA6xqQAZmoNxC2487RCm7vVlpenrrxECXULJIQicRSGRyLKKb4rZrPdqvAbDUbjSLuQ6zBb9QHnVRXbScNRYWpqNK9LC6RRAA
        \begin{tikzcd}[column sep = 2.5em, row sep = 3em]
            {\Pi_{i\in[\![1,n]\!]}S(c_i)} \arrow[dd, "p_i"'] \arrow[rr, "{(S(f_i))_{i\in[\![1,n]\!]}}"] \arrow[rrdd, "S(f_i) \circ p_i"'] &  & {\Pi_{i\in [\![1,n]\!]}S(c'_i)} \arrow[dd, "p'_i"] \\
            &  &                                                    \\
            S(c_i) \arrow[rr, "S(f_i)"']
            &  & S(c'_i)
        \end{tikzcd}
    };
\end{tzcategory}

\begin{prop}{\cite{wakamatsu1980note}}
    \label{fullSplitEpi}
    Let $L\dashv R$ a pair of adjoint functors.

    Then $L : \mathcal{D}\rightarrow \mathcal{C}$ is fully faithful iff the unit $\eta$ of the adjunction is a natural isomorphism.
    %TODO : define split epi/mono
\end{prop}

\begin{thm}
    Let $\textbf{E}$ be a category.
    Let $\mathfrak{A} : \textbf{L}\dashv \textbf{R}$ be an adjunction such that $\textbf{L} : \textbf{Cat} \rightarrow \textbf{E}$, $R : \textbf{E} \rightarrow \textbf{Cat}$  such that $\bf L$ is fully faithful.
    %TODO define full/ faithful

    Then, $\mathfrak{A}$ induces a monad $(\_)^\mathfrak{A}$ on $[\_,\textbf{R}(E)]$, for $E \in \textbf{E}$.
\end{thm}

\begin{proof}
    \begin{tzcategory}{\caption{$S_L$ is uniquely defined }
            \label{uniqueSA}}
        \node[scale=1.3] (a) at (0,0){
            % https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAB12BbOnACwDGjYAGEAviDGl0mXPkIoATOSq1GLNgFkAFJx78hDUWICUk6SAzY8BIgEZSi1fWatEIAMowck1TCgA5vBEoABmAE4QXEhkIDgQSA5qrlrmYZHRiLHxSMrJGu4eINQMdABGMAwACrI2CiDhWAF8PlLpUYnUOYh5LgWeAPqavmJAA
            \begin{tikzcd}[column sep = 1.8em, row sep = 2.2em]
                \mathcal{C}
                \arrow[rr, "\eta^\mathfrak{A}(\mathcal{C})"]
                \arrow[rdd, "S"',""{name=S, right}]
                & & \textbf{RL}(\mathcal{C})
                \arrow[ldd, "\textbf{R}(S_L)", ""{name=SP, left}] \\
                &  \arrow[Rightarrow, from=S, to=SP, "\mathds{1}_S"]   &             \\
                & \textbf{R}(E) &
            \end{tikzcd}
        };
    \end{tzcategory}


    According to the Hom-set definition of an adjunction, there is a natural isomorphism
    $\phi :  Hom(\textbf{L}\_,\_) \rightarrow Hom(\_,\textbf{R}\_)$. Let then $S_L : L(\mathcal{C})\rightarrow E$ such that
    $S_L = \phi^{-1}_{\mathcal{C},E}(S)$. The equivalence with the definition via universal morphism of an adjunction (Theorem 2 p.83 in \cite{lane_1971}) tells us that the Figure \ref{uniqueSA} commutes.

    Since $\bf L$ is fully faithful, Proposition \ref{fullSplitEpi} tells us that for all category $\mathcal{C}$, $\eta^\mathfrak{A}_\mathcal{C} $ is an isomorphism. Consequently, there exists a functor $\big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1}$ such that $\eta^\mathfrak{A}_\mathcal{C} \circ \big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1}
        =  Id_{\textbf{RL}(\mathcal{C})}$.
    Since $S = S^\mathfrak{A}\eta^\mathfrak{A}_\mathcal{C} $ we can then deduce that
    \begin{equation}
        \label{proofSA}
        S\big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1} = S^\mathfrak{A}
    \end{equation}

    $S^{A} = S\eta^{-1}$

    $S^{A}\eta = S$

    Donc, si $S^A = R(truc)$

    $S^{A} = R(S_L)$

    par unicité

    Moreover, since $\eta^\mathfrak{A}$ is a natural transformation,
    $ \eta^\mathfrak{A}_\mathcal{D}N =  N^\mathfrak{A}
        \eta^\mathfrak{A}_\mathcal{C}$
    %  \begin{align*}
    %     \mathds{1}_S  \big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1}  
    %     & = id_{S\big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1}  }  \\
    %     & = id_{S^\mathfrak{A}\eta^\mathfrak{A}_\mathcal{C} 
    %     \big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1} }  \\
    %  \end{align*}

    % According to the definition via universal morphism of an adjunction (Theorem 2 p.83 in \cite{lane_1971}), there is a unique functor $S_L$ such that Figure \ref{uniqueSA} commutes. We can now define $S^\mathfrak{A}$ as  $S^\mathfrak{A} = \textbf{R}(S_L)$. Moreover, we have $S_L \in Hom(\textbf{L}\mathcal{C},E)$. So by considering the Hom-set definition of an adjunction, there is a natural isomorphism $\phi :  Hom(\textbf{L}\_,\_) \rightarrow Hom(\_,\textbf{R}\_)$. Let then $S_R : \mathcal{C}\rightarrow\textbf{R}(E)$ such that $S_R = \phi_{\mathcal{C},E}(S_L)$.

    Let $\big<N,\nu\big> : [\mathcal{C},\textbf{R}(E)] \rightarrow [\mathcal{D}, \textbf{R}(E)]$  be an arrow of $[\_,\textbf{R}(E)]$. We define
    \begin{align*}
        \big<N^\mathfrak{A},\nu^\mathfrak{A}\big>
         & : [\textbf{RL}(\mathcal{C}),\textbf{R}(E)]
        \rightarrow [\textbf{RL}(\mathcal{D}), \textbf{R}(E)]                             \\
        \big<N^\mathfrak{A},\nu^\mathfrak{A}\big>
         & = \big<\textbf{RL}(N), \nu \big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1}  \big>
    \end{align*}


    We now have to prove that $(\_)^\mathfrak{A}$ is an endofunctor of $[\_,\textbf{R}(E)]$  :
    \begin{align*}
        (Id_S)^\mathfrak{A}
         & = \big<\textbf {RL}(Id_\mathcal{C}),
        \mathds{1}_S  \big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1} \big>  \\
         & = \big<Id_{\textbf {RL}(\mathcal{C})},
        \mathds{1}_{S \big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1} }\big> \\
         & = \big<Id_{\textbf {RL}(\mathcal{C})},
        \mathds{1}_{S^\mathfrak{A}}\big>
         & \text{because of (\ref{proofSA})}                              \\
         & = Id_{S^\mathfrak{A}}
    \end{align*}
    Let  $\big<N,\nu\big> : [\mathcal{D},\textbf{R}(E)] \rightarrow
        [\mathcal{E},\textbf{R}(E)] $ and
    $\big<P,\pi\big> :[\mathcal{C},\textbf{R}(E)] \rightarrow
        [\mathcal{D},\textbf{R}(E)]$
    \begin{align*}
        \Big(\big<N,\nu\big>\circ \big<P,\pi\big> \Big)^\mathfrak{A}
         & = \Big(\big<NP,(\nu P)\pi\big> \Big)^\mathfrak{A}           \\
         & = \big<\textbf{RL}(NP),
        (\nu\pi)\big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1} \big>     \\
         & = \big<(NP)^\mathfrak{A},
        ((\nu P)\pi)\big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1} \big> \\
         & = \big<(NP)^\mathfrak{A},
        (\nu P\big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1}  \circ
        \pi \big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1} \big>         \\
         & = \big<(NP)^\mathfrak{A},
        \nu \big(\eta^\mathfrak{A}_\mathcal{D}\big)^{-1}
        \eta^\mathfrak{A}_\mathcal{D}
        P \big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1} \circ
        \pi \big(\eta^\mathfrak{A}_\mathcal{C}\big)^{-1} \big>         \\
         & =                                                           \\
         & = \nu^\mathfrak{A}\pi^\mathfrak{A}
    \end{align*}



    \begin{tzcategory}{\caption{A natural transformation $\xi$ between complete homographies}}
        \node[scale=1.5] (a) at (0,0){
            % https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBoBGAXVJADcBDAGwFcYkQAdDgW3pwAsAxk2ABhAL4hxpdJlz5CKAEwVqdJq3ZdeA4Y2AARSdNnY8BIioDMahizaJOHAEYAzAAQBlGDikyQGGYKROSkxLYaDiAAsgAU2nxCIhIAlH6m8hYoVmER9uxxCboiRmniajBQAObwRKCuAE4Q3EhkIDgQSCrq+Y6eIDSM9M4wjAAKcuaKIA1YVfy+JiCNzUih7Z2I3XaafQDkAyBDI+OTwY6z84v+Ky2IbR1rNDtRAHLpy013D5s5PbsxD63J4bJAAFmekQKh2OowmQSyRxgrmu9S+SD+j0QEP+bwOS2BiExm22UL6AH1ojDhnCzojLgtDiMwFBWoMsGAolB6HB+JUgejsTQsaTeiBPHtKVJKOIgA
            \begin{tikzcd}[column sep = 2.7em, row sep = 3em]
                & RL(\mathcal{C})
                \arrow[rr, "N^\mathfrak{A}"]
                \arrow[rddd, "S^\mathfrak{A}"', ""{name=SM, right}]
                & & RL(\mathcal{D})
                \arrow[lddd, "{S'}^\mathfrak{A}",""{name=SpM, left}]
                \\
                \mathcal{C} \arrow[rrdd, "S"',""{name=S,right}]
                \arrow[rr, "N", crossing over]
                \arrow[ru, "\eta^\mathfrak{A}(\mathcal{C})"]
                & \ar[Rightarrow,from=SM, to=SpM, "\nu^\mathfrak{A}"' near start]
                & \mathcal{D}
                \arrow[dd, "S'",""{name=Sp, left}, crossing over]
                \arrow[ru, "\eta^\mathfrak{A}(\mathcal{D})"]
                & \\
                & \ar[Rightarrow,from=S, to=Sp, "\nu"' near start, crossing over]
                & & \\
                & & R(E) &
            \end{tikzcd}
        };
    \end{tzcategory}


    \begin{tzcategory}{\caption{A natural transformation $\xi$ between complete homographies}}
        \node[scale=1.5] (a) at (0,0){
            % https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBoBGAXVJADcBDAGwFcYkQAdDgW3pwAsAxk2ABhAL4hxpdJlz5CKAEwVqdJq3ZdeA4Y2AARSdNnY8BIioDMahizaJOHAEYAzAAQBlGDikyQGGYKROSkxLYaDiAAsgAU2nxCIhIAlH6m8hYoVmER9uxxCboiRmniajBQAObwRKCuAE4Q3EhkIDgQSCrq+Y6eIDSM9M4wjAAKcuaKIA1YVfy+JiCNzUih7Z2I3XaafQDkAyBDI+OTwY6z84v+Ky2IbR1rNDtRAHLpy013D5s5PbsxD63J4bJAAFmekQKh2OowmQSyRxgrmu9S+SD+j0QEP+bwOS2BiExm22UL6AH1ojDhnCzojLgtDiMwFBWoMsGAolB6HB+JUgejsTQsaTeiBPHtKVJKOIgA
            \begin{tikzcd}[column sep = 2.7em, row sep = 3em]
                & LRL(\mathcal{C})
                \arrow[rr, "N^\mathfrak{A}"]
                \arrow[rddd, "S^\mathfrak{A}"', ""{name=SM, right}]
                & & LRL(\mathcal{D})
                \arrow[lddd, "{S'}^\mathfrak{A}",""{name=SpM, left}]
                \\
                L(\mathcal{C}) \arrow[rrdd, "L(S)"',""{name=S,right}]
                \arrow[rr, "L(N)", crossing over]
                \arrow[ru, "\eta^\mathfrak{A}(\mathcal{C})"]
                & \ar[Rightarrow,from=SM, to=SpM, "\nu^\mathfrak{A}"' near start]
                & L(\mathcal{D})
                \arrow[dd, "L(S')",""{name=Sp, left}, crossing over]
                \arrow[ru, "\eta^\mathfrak{A}(\mathcal{D})"]
                & \\
                & \ar[Rightarrow,from=S, to=Sp, "L(\nu)"' near start, crossing over]
                & & \\
                & & LR(E) &
            \end{tikzcd}
        };
    \end{tzcategory}



\end{proof}


\begin{defn}[The monad $(\_)_\prodmon$]
    Let $(\_)_\prodmon : [\_, \bf Set] \rightarrow [\_,\bf Set]$ be an endofunctor of the category $ [\_, \bf Set] $ such that, for a functor $S : \mathcal{C} \rightarrow \bf Set$, a functor $S' : \mathcal{D} \rightarrow \bf Set$ and an arrow $(N,\nu)$ between $S$ and $S'$
    \begin{align*}
        S_\prodmon\big(c_1,\dots,c_n\big)
         & = S(c_1)\times\dots\times S(c_n)           \\
        S_\prodmon\big(f_1,\dots,f_n\big)
         & = S(f_1)\times\dots\times S(f_n)           \\
        N_\prodmon\big(c_1,\dots,c_n\big)
         & = N(c_1),\dots, N(c_n)                     \\
        N_\prodmon\big(f_1,\dots,f_n\big)
         & = N(f_1),\dots, N(f_n)                     \\
        \nu_\prodmon\big(c_1,\dots,c_n\big)
         & = S(c_1)\times\dots\times S(c_n))  \mapsto \\
         & \hspace{1cm}
        \nu(c_1) S(c_1)\times\dots\times \nu(c_n) S(c_n)
    \end{align*}
    \begin{align*}
        \eta_\prodmon(S)                                                       & = \big<\eta_M(\mathcal{C}),\mathrm{1}\big>             \\
        \mu_\prodmon\big((S_\prodmon)_\prodmon\big)\big((mc_1,\dots,mc_n)\big) & =  \big(S_\prodmon(c_1)+ \dots + S_\prodmon(mc_n)\big) \\
    \end{align*}
\end{defn}

\begin{tzcategory}{\caption{A natural transformation $\xi$ between complete homographies}}
    \node[scale=1.5] (a) at (0,0){
        % https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBoBGAXVJADcBDAGwFcYkQAdDgW3pwAsAxk2ABhAL4hxpdJlz5CKAEwVqdJq3ZdeA4Y2AARSdNnY8BIioDMahizaJOHAEYAzAAQBlGDikyQGGYKROSkxLYaDiAAsgAU2nxCIhIAlH6m8hYoVmER9uxxCboiRmniajBQAObwRKCuAE4Q3EhkIDgQSCrq+Y6eIDSM9M4wjAAKcuaKIA1YVfy+JiCNzUih7Z2I3XaafQDkAyBDI+OTwY6z84v+Ky2IbR1rNDtRAHLpy013D5s5PbsxD63J4bJAAFmekQKh2OowmQSyRxgrmu9S+SD+j0QEP+bwOS2BiExm22UL6AH1ojDhnCzojLgtDiMwFBWoMsGAolB6HB+JUgejsTQsaTeiBPHtKVJKOIgA
        \begin{tikzcd}[column sep = 2.7em, row sep = 3em]
            & M(\mathcal{C})
            \arrow[rr, "N_\prodmon"]
            \arrow[rddd, "S_\prodmon"', ""{name=SM, right}]
            & & M(\mathcal{D})
            \arrow[lddd, "S'_\prodmon",""{name=SpM, left}]
            \\
            \mathcal{C} \arrow[rrdd, "S"',""{name=S,right}]
            \arrow[rr, "N", crossing over]
            \arrow[ru, "\eta_M(\mathcal{C})"]
            & \ar[Rightarrow,from=SM, to=SpM, "\nu_\prodmon"' near start]
            & \mathcal{D}
            \arrow[dd, "S'",""{name=Sp, left}, crossing over]
            \arrow[ru, "\eta_M(\mathcal{D})"]
            & \\
            & \ar[Rightarrow,from=S, to=Sp, "\nu"' near start, crossing over]
            & & \\
            & & \bf Set &
        \end{tikzcd}
    };
\end{tzcategory}

\begin{prop}
    $(\_)_\prodmon$ is a monad of the category $ [\_, \bf Set] $.
\end{prop}

\begin{proof}
    \begin{enumerate}
        \item $S_\prodmon, S'_\prodmon$ and $N_\prodmon$ are functors and $\nu_\prodmon$ is a natural transformation between $S_\prodmon$ and $S'_\prodmon$. This proofs are fairly simple, we will only do the naturality of $\nu_\prodmon$ : \newline
              Let $c,d \in M(\mathcal{C})$ and $ f\in Hom(c,d)$. Then,
              \begin{align*}
                  S'_\prodmon(f) \nu_\prodmon(c) S_\prodmon(c)
                   & = S'_\prodmon(f) \big( \nu(c_1) S(c_1)\times\dots\times \nu(c_n) S(c_n)\big)     &                                 \\
                   & =  \big( S'(f_1)\nu(c_1) S(c_1)\times\dots\times S'(f_n)\nu(c_n) S(c_n)\big)     &                                 \\
                   & =  \big( \nu(f_1c_1)S(f_1)S(c_1)\times\dots\times \nu(f_nc_n)S(f_n)) S(c_n)\big) & \text{because $\nu$ is natural} \\
                   & = \nu_\prodmon(fc)S_\prodmon(f)S_\prodmon(c)                                     &
              \end{align*}
              In other words, we have $ S'_\prodmon(f) \nu_\prodmon(c) = \nu_\prodmon(d)S_\prodmon(f)$.
        \item $(\_)_\prodmon$ is a functor :
              \begin{align*}
                  \big(1_{\mathcal{C}}(S)\big)_\prodmon = S_\prodmon       \\
                   & =  1_{M(\mathcal{C})}(S_\prodmon)                     \\
                  \big(\mathds{1}_{\mathcal{C},S}\big)_\prodmon(s)
                   & = \big(S(c_1)\times\dots\times S(c_n)\big)
                  \mapsto \big(\mathds{1}_{\mathcal{C},S} S(c_1)
                  \times\dots\times \mathds{1}_{\mathcal{C},S} S(c_n)\big) \\
                   & = \big(S(c_1)\times\dots\times S(c_n)\big)
                  \mapsto  \big(S(c_1)\times\dots\times S(c_n)\big)        \\
                   & = \mathds{1}_{M(\mathcal{C}),S_\prodmon}              \\
                   &                                                       \\
                  (N'N)_\prodmon(c)
                   & = \big(N'N(c_1),\dots, N'N(c_n)\big)                  \\
                   & = N'_\prodmon\big(N(c_1),\dots, N(c_n)\big)           \\
                   & = N'_\prodmon N_\prodmon(c)                           \\
                   & \text{The same goes for $(NN')_\prodmon(f)$
                  with f a morphism}                                       \\
                   &                                                       \\
                  \big(\nu'\nu\big)_\prodmon(c)\big(S_\prodmon(c)\big)
                   & =   \big(\nu'\nu(c_1) S(c_1)\times
                  \dots\times \nu'\nu(c_n) S(c_n)\big)                     \\
                   & =   \big(\nu'\nu(c_1) S(c_1)\times
                  \dots\times \nu'\nu(c_n) S(c_n)\big)                     \\
                   & = \nu'_\prodmon\nu_\prodmon\big(S_\prodmon(c)\big)
              \end{align*}
        \item
    \end{enumerate}
\end{proof}


\begin{tzcategory}{\caption{A natural transformation $\xi$ between complete homographies}}
    \node[scale=2] (a) at (0,0){
        % https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAB12ARGBnOkAF9S6TLnyEUARlIAmKrUYs2AZRg4hIkBmx4CRGZWr1mrRB3YBbOjgAWAY0bAAwoM2jdEorPIKTy805rO0cGFwByN0EFGCgAc3giUAAzACcISyQyEBwIJBlFUzYAJRBqBjoAI14ABTE9SRBUrDjbDWEU9MzEHxy8xAL-MxAVMpAK6oY6z31zZtb2rTSMpABmalz84yVhlXD3EGXu7M2e7aLzADEDo6Re0-WQarAoNeyhtgA5AH0pG667ht+o9nq9EABaVbvHZfb6yMYTWr1LxzFptIQUQRAA
        \begin{tikzcd}[column sep = 2.5em, row sep = 3em]
            \Delta
            \arrow[rdd, "R"',""{name=R,right}]
            \arrow[r, "F"]
            &
            \mathcal{C}
            \arrow[dd, "S"' near start,""{name=Sl,left},""{name=Sr,right}]
            \arrow[r, "N_1", bend left, ""{name=N1,right}]
            \arrow[r, "N_2"', bend right,""{name=N2,right}]
            \arrow[Rightarrow, from=N1, to=N2, "\xi"']
            &
            \mathcal{C'}
            \arrow[ldd, "S'",""{name=Sp,left}] \\
            & \ar[Rightarrow,bend left=30,from=Sr, to=Sp, "\widetilde{\nu}"']
            & \ar[Rightarrow,bend left=30,from=R, to=Sl, "\phi"']
            \\
            & Set &
        \end{tikzcd}
    };
\end{tzcategory}

\begin{defn}
    A \textbf{natural transformation} between two complete homographies $(N_1,\nu_1)$ and $(N_2,\nu_2)$ is a natural transformation $\xi : S'N_1\rightarrow S'N_2$ such that
    \begin{equation}
        \widetilde{\nu_2}= \xi\widetilde{\nu_1}
    \end{equation}
    Though I don't think this can easily satisfied...
\end{defn}







\chapter{Conclusion}

\paragraph{Can we adapt natural transformations to fit all K-net isographies}
There are 48 automorphisms of the $T/I$ group. 24 are covered by $T/I$ acting on it self. How to get the 24 others?

$$\circ : T/I \times T/I \rightarrow T/I$$

\begin{itemize}
    \item $T_i \circ T_j = T_{i + j}$
    \item $T_i \circ I_j = I_{i + j}$
    \item $I_i \circ T_j = I_{-i + j}$
    \item $I_i \circ I_j = T_{-i + j}$
\end{itemize}

Let us define
$$\star : T/I \times T/I \rightarrow T/I$$.

Idea : add a multiplication (ie another group action).

We want to use $T/I$ as a ring. BUT $T/I$ is not abelian. So we just use a wtf construction. Don't know if it's useful but still this is a category.
\begin{itemize}
    \item $T_i \star T_j = T_{5(i + j)}$
    \item $I_i \star T_j = I_{5(i + j)}$
    \item $I_i \star I_j = T_{7i + 5j}$
    \item $T_i \star I_j = I_{7i + 5j}$
\end{itemize}



\begin{prop}
    $a \star (b \circ c) = (a \star b) \circ (b \star c)) $
\end{prop}
\begin{proof}
    \begin{itemize}
        \item $T_i \star (T_j \circ T_k) = T_{i(j+k)} = T_{ij}\circ T{jk}$
        \item $I_i \star (T_j \circ T_k) = I_{i(j+k)} = T_{ij}\circ T{jk}$
    \end{itemize}
\end{proof}


\chapter{Implementation}
\paragraph{What Haskell library will we use ?}
\begin{itemize}
    \item \href{http://hackage.haskell.org/package/base-4.7.0.1/docs/Control-Category.html}{the base library}
    \item the package \href{https://hackage.haskell.org/package/categories}{categories} which extends the base library
    \item the package \href{https://hackage.haskell.org/package/constrained-categories}{constrained-categories} which is more general than above libraries since we can use constraints on the types in the category.
    \item the package \href{https://hackage.haskell.org/package/subhask-0.1.1.0}{subhask} which is quite similar to constrained categories
    \item the package \href{https://hackage.haskell.org/package/free-categories}{free-categories} which is quite similar to Alexandre Popoff's \href{https://github.com/AlexPof/colubridae}{Colubridae}
\end{itemize}
\newpage

\bibliography{bibliography}
\bibliographystyle{ieeetr}
\end{document}